\hypertarget{classbot_1_1Bot}{}\doxysection{bot.\+Bot Class Reference}
\label{classbot_1_1Bot}\index{bot.Bot@{bot.Bot}}


Inheritance diagram for bot.\+Bot\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classbot_1_1Bot__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for bot.\+Bot\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=245pt]{classbot_1_1Bot__coll__graph}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
def \mbox{\hyperlink{classbot_1_1Bot_a02363723fa719a25a800daa2f6beb92d}{\+\_\+\+\_\+del\+\_\+\+\_\+}} (self)
\item 
def \mbox{\hyperlink{classbot_1_1Bot_a7d3a37ec776e61fad4a6be2612c0e906}{\+\_\+\+\_\+init\+\_\+\+\_\+}} (self, \mbox{\hyperlink{classbot_1_1Bot_a713a9070511a3545c1b9f37118bc2088}{str}} \mbox{\hyperlink{classbot_1_1Bot_aaf6cd6c903b32263619da0130916b16f}{id}}, Optional\mbox{[}Callable\mbox{[}\mbox{[}\mbox{\hyperlink{classbot_1_1Message}{Message}}\mbox{]}, bool\mbox{]}\mbox{]} \mbox{\hyperlink{classbot_1_1Bot_aed622df2ae13229f657faecdf83a3909}{on\+\_\+incoming\+\_\+message}}=None, Optional\mbox{[}Callable\mbox{[}\mbox{[}\mbox{\hyperlink{classbot_1_1Message}{Message}}\mbox{]}, bool\mbox{]}\mbox{]} \mbox{\hyperlink{classbot_1_1Bot_a69db2b0d03aa84dc1e3170d0a92b82fb}{on\+\_\+outgoing\+\_\+message}}=None)
\item 
bool \mbox{\hyperlink{classbot_1_1Bot_a57e4d6d9c824c063b5fcac4024717e1b}{alive}} (self)
\item 
def \mbox{\hyperlink{classbot_1_1Bot_ab59d7a2ff54fb51aba3c7c537dc9dd9f}{consume\+\_\+incoming\+\_\+queue}} (self)
\item 
def \mbox{\hyperlink{classbot_1_1Bot_affc589ed1cdb57710dc551f8a460cb6d}{consume\+\_\+outgoing\+\_\+queue}} (self)
\item 
def \mbox{\hyperlink{classbot_1_1Bot_a5b75973a7eae79a74d717eacb2b778b2}{deserialize}} (cls, data)
\item 
bool \mbox{\hyperlink{classbot_1_1Bot_abcb1dacfc1a62e2605216467ab1ccbea}{http\+\_\+check}} (self)
\item 
bool \mbox{\hyperlink{classbot_1_1Bot_ad5d7132f04e1da19e3353fdaea60671b}{is\+\_\+running}} (self)
\item 
def \mbox{\hyperlink{classbot_1_1Bot_a1a5afd8d908416b5c1301df7691f9948}{receive\+\_\+message}} (self, \mbox{\hyperlink{classbot_1_1Bot_a713a9070511a3545c1b9f37118bc2088}{str}} payload, bool wait=False)
\item 
Optional\mbox{[}bool\mbox{]} \mbox{\hyperlink{classbot_1_1Bot_adbd5dedcd2aca4ef616e4ee322324831}{send\+\_\+message}} (self, \mbox{\hyperlink{classbot_1_1Bot_a713a9070511a3545c1b9f37118bc2088}{str}} payload, bool wait=False)
\item 
def \mbox{\hyperlink{classbot_1_1Bot_a7d35e11e0846a89874d419f85f72ac82}{serialize}} (self, max\+\_\+queue\+\_\+items=None)
\item 
def \mbox{\hyperlink{classbot_1_1Bot_aebb0cbe71236c1e928a7f8bc75edcc8a}{start}} (self, \mbox{\hyperlink{classbot_1_1Bot_a713a9070511a3545c1b9f37118bc2088}{str}} consumer\+\_\+out\+\_\+thread\+\_\+name=\char`\"{}Bot\+Consumer\+Outgoing\+Thread\char`\"{}, str consumer\+\_\+in\+\_\+thread\+\_\+name=\char`\"{}Bot\+Consumer\+Incoming\+Thread\char`\"{}, bool daemon=True, $\ast$$\ast$thread\+\_\+kwargs)
\item 
def \mbox{\hyperlink{classbot_1_1Bot_ad104bfb455f514dab0e9a1df889661f4}{stop}} (self)
\end{DoxyCompactItemize}
\doxysubsection*{Public Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classbot_1_1Bot_a4200619881ffd921c83fea1c88ade779}{bot\+\_\+logger}}
\item 
\mbox{\hyperlink{classbot_1_1Bot_a49a3cb244864db94f45e1839a6633b48}{bot\+\_\+stop\+\_\+event}}
\item 
\mbox{\hyperlink{classbot_1_1Bot_a87e70e3fb06627351b11db45260eb012}{consumer\+\_\+in\+\_\+thread}}
\item 
\mbox{\hyperlink{classbot_1_1Bot_a840f4ce430e2db8135638d5604988685}{consumer\+\_\+out\+\_\+thread}}
\item 
\mbox{\hyperlink{classbot_1_1Bot_aaf6cd6c903b32263619da0130916b16f}{id}}
\item 
\mbox{\hyperlink{classbot_1_1Bot_a547f67086019ed117d6b166d0df7c8b9}{incoming\+\_\+messages}}
\item 
\mbox{\hyperlink{classbot_1_1Bot_aed622df2ae13229f657faecdf83a3909}{on\+\_\+incoming\+\_\+message}}
\item 
\mbox{\hyperlink{classbot_1_1Bot_a69db2b0d03aa84dc1e3170d0a92b82fb}{on\+\_\+outgoing\+\_\+message}}
\item 
\mbox{\hyperlink{classbot_1_1Bot_aa39fcf960e34cbf36063915ba17dc982}{outgoing\+\_\+messages}}
\end{DoxyCompactItemize}
\doxysubsection*{Static Public Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classbot_1_1Bot_a713a9070511a3545c1b9f37118bc2088}{str}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


Definition at line 171 of file bot.\+py.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classbot_1_1Bot_a7d3a37ec776e61fad4a6be2612c0e906}\label{classbot_1_1Bot_a7d3a37ec776e61fad4a6be2612c0e906}} 
\index{bot.Bot@{bot.Bot}!\_\_init\_\_@{\_\_init\_\_}}
\index{\_\_init\_\_@{\_\_init\_\_}!bot.Bot@{bot.Bot}}
\doxysubsubsection{\texorpdfstring{\_\_init\_\_()}{\_\_init\_\_()}}
{\footnotesize\ttfamily def bot.\+Bot.\+\_\+\+\_\+init\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{\mbox{\hyperlink{classbot_1_1Bot_a713a9070511a3545c1b9f37118bc2088}{str}}}]{id,  }\item[{Optional\mbox{[}Callable\mbox{[}\mbox{[}\mbox{\hyperlink{classbot_1_1Message}{Message}}\mbox{]}, bool\mbox{]}\mbox{]} }]{on\+\_\+incoming\+\_\+message = {\ttfamily None},  }\item[{Optional\mbox{[}Callable\mbox{[}\mbox{[}\mbox{\hyperlink{classbot_1_1Message}{Message}}\mbox{]}, bool\mbox{]}\mbox{]} }]{on\+\_\+outgoing\+\_\+message = {\ttfamily None} }\end{DoxyParamCaption})}



Definition at line 175 of file bot.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{175     \textcolor{keyword}{def }\_\_init\_\_(self, id: str,}
\DoxyCodeLine{176                  on\_incoming\_message: Optional[Callable[[Message], bool]] = \textcolor{keywordtype}{None},}
\DoxyCodeLine{177                  on\_outgoing\_message: Optional[Callable[[Message], bool]] = \textcolor{keywordtype}{None}):}
\DoxyCodeLine{178         self.id = id}
\DoxyCodeLine{179         self.outgoing\_messages = queue.Queue(maxsize=1000)}
\DoxyCodeLine{180         self.incoming\_messages = queue.Queue(maxsize=1000)}
\DoxyCodeLine{181         self.bot\_stop\_event = threading.Event()}
\DoxyCodeLine{182         self.on\_incoming\_message = on\_incoming\_message}
\DoxyCodeLine{183         self.on\_outgoing\_message = on\_outgoing\_message}
\DoxyCodeLine{184         }
\DoxyCodeLine{185         self.bot\_logger = Logger(name=f\textcolor{stringliteral}{"bot-\/\{self.id\}"}, enable\_file\_handler=\textcolor{keyword}{True}, enable\_syslog\_handler=\textcolor{keyword}{True})}
\DoxyCodeLine{186         self.bot\_logger.config(log\_dir=f\textcolor{stringliteral}{"./logs/bot-\/\{self.id\}"}, min\_level=\textcolor{stringliteral}{"DEBUG"})}
\DoxyCodeLine{187         self.bot\_logger.info(f\textcolor{stringliteral}{"Bot with id=\{self.id\} created"})}
\DoxyCodeLine{188 }
\DoxyCodeLine{189         self.consumer\_out\_thread = \textcolor{keywordtype}{None}}
\DoxyCodeLine{190         self.consumer\_in\_thread = \textcolor{keywordtype}{None}}
\DoxyCodeLine{191 }
\DoxyCodeLine{192         atexit.register(self.stop)}
\DoxyCodeLine{193 }

\end{DoxyCode}
\mbox{\Hypertarget{classbot_1_1Bot_a02363723fa719a25a800daa2f6beb92d}\label{classbot_1_1Bot_a02363723fa719a25a800daa2f6beb92d}} 
\index{bot.Bot@{bot.Bot}!\_\_del\_\_@{\_\_del\_\_}}
\index{\_\_del\_\_@{\_\_del\_\_}!bot.Bot@{bot.Bot}}
\doxysubsubsection{\texorpdfstring{\_\_del\_\_()}{\_\_del\_\_()}}
{\footnotesize\ttfamily def bot.\+Bot.\+\_\+\+\_\+del\+\_\+\+\_\+ (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 374 of file bot.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{374     \textcolor{keyword}{def }\_\_del\_\_(self):}
\DoxyCodeLine{375         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} self.bot\_stop\_event.is\_set():}
\DoxyCodeLine{376             self.stop()}
\DoxyCodeLine{377 }

\end{DoxyCode}


References bot.\+Bot.\+bot\+\_\+stop\+\_\+event, and bot.\+Bot.\+stop().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=283pt]{classbot_1_1Bot_a02363723fa719a25a800daa2f6beb92d_cgraph}
\end{center}
\end{figure}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classbot_1_1Bot_a57e4d6d9c824c063b5fcac4024717e1b}\label{classbot_1_1Bot_a57e4d6d9c824c063b5fcac4024717e1b}} 
\index{bot.Bot@{bot.Bot}!alive@{alive}}
\index{alive@{alive}!bot.Bot@{bot.Bot}}
\doxysubsubsection{\texorpdfstring{alive()}{alive()}}
{\footnotesize\ttfamily  bool bot.\+Bot.\+alive (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 259 of file bot.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{259     \textcolor{keyword}{def }alive(self) -\/> bool:}
\DoxyCodeLine{260         \textcolor{keywordflow}{try}:}
\DoxyCodeLine{261             \textcolor{keywordflow}{return} self.is\_running() \textcolor{keywordflow}{and} self.http\_check()}
\DoxyCodeLine{262         \textcolor{keywordflow}{except} BotHealthCheckException:}
\DoxyCodeLine{263             \textcolor{keywordflow}{return} \textcolor{keyword}{False}}
\DoxyCodeLine{264 }

\end{DoxyCode}


References bot.\+Bot.\+http\+\_\+check(), and bot.\+Bot.\+is\+\_\+running().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=303pt]{classbot_1_1Bot_a57e4d6d9c824c063b5fcac4024717e1b_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classbot_1_1Bot_ab59d7a2ff54fb51aba3c7c537dc9dd9f}\label{classbot_1_1Bot_ab59d7a2ff54fb51aba3c7c537dc9dd9f}} 
\index{bot.Bot@{bot.Bot}!consume\_incoming\_queue@{consume\_incoming\_queue}}
\index{consume\_incoming\_queue@{consume\_incoming\_queue}!bot.Bot@{bot.Bot}}
\doxysubsubsection{\texorpdfstring{consume\_incoming\_queue()}{consume\_incoming\_queue()}}
{\footnotesize\ttfamily def bot.\+Bot.\+consume\+\_\+incoming\+\_\+queue (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 305 of file bot.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{305     \textcolor{keyword}{def }consume\_incoming\_queue(self):}
\DoxyCodeLine{306         \textcolor{keywordflow}{while} \textcolor{keywordflow}{not} self.bot\_stop\_event.is\_set():}
\DoxyCodeLine{307             \textcolor{keywordflow}{try}:}
\DoxyCodeLine{308                 queued\_msg: IncomingQueuedMessage = self.incoming\_messages.get(block=\textcolor{keyword}{True})}
\DoxyCodeLine{309                 \textcolor{keywordflow}{if} self.bot\_stop\_event.is\_set():}
\DoxyCodeLine{310                     \textcolor{keywordflow}{break}}
\DoxyCodeLine{311 }
\DoxyCodeLine{312                 stored\_ok = \textcolor{keyword}{True}}
\DoxyCodeLine{313                 \textcolor{keywordflow}{if} self.on\_incoming\_message:}
\DoxyCodeLine{314                     \textcolor{keywordflow}{try}:}
\DoxyCodeLine{315                         stored\_ok = self.on\_incoming\_message(queued\_msg.message)}
\DoxyCodeLine{316                     \textcolor{keywordflow}{except} Exception \textcolor{keyword}{as} e:}
\DoxyCodeLine{317                         self.bot\_logger.error(f\textcolor{stringliteral}{"Incoming callback error: \{e\}"})}
\DoxyCodeLine{318                         stored\_ok = \textcolor{keyword}{False}}
\DoxyCodeLine{319 }
\DoxyCodeLine{320                 \textcolor{keywordflow}{if} stored\_ok:}
\DoxyCodeLine{321                     queued\_msg.stored\_ok = \textcolor{keyword}{True}}
\DoxyCodeLine{322                     queued\_msg.set\_result(\textcolor{keyword}{True})}
\DoxyCodeLine{323                 \textcolor{keywordflow}{else}:}
\DoxyCodeLine{324                     queued\_msg.store\_retries -\/= 1}
\DoxyCodeLine{325                     \textcolor{keywordflow}{if} queued\_msg.store\_retries > 0:}
\DoxyCodeLine{326                         self.incoming\_messages.put(queued\_msg, block=\textcolor{keyword}{True})}
\DoxyCodeLine{327                     \textcolor{keywordflow}{else}:}
\DoxyCodeLine{328                         queued\_msg.set\_result(\textcolor{keyword}{False})}
\DoxyCodeLine{329             \textcolor{keywordflow}{except} Exception \textcolor{keyword}{as} e:}
\DoxyCodeLine{330                 self.bot\_logger.error(f\textcolor{stringliteral}{"Unexpected error in incoming processing: \{e\}"})}
\DoxyCodeLine{331                 \textcolor{keywordflow}{raise} BotMessageException(f\textcolor{stringliteral}{"Incoming queue processing failed: \{e\}"}) \textcolor{keyword}{from} e}
\DoxyCodeLine{332 }
\DoxyCodeLine{333 }

\end{DoxyCode}


References bot.\+Bot.\+bot\+\_\+logger, bot.\+Bot.\+bot\+\_\+stop\+\_\+event, bot.\+Bot.\+incoming\+\_\+messages, and bot.\+Bot.\+on\+\_\+incoming\+\_\+message.



Referenced by bot.\+Bot.\+start().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=342pt]{classbot_1_1Bot_ab59d7a2ff54fb51aba3c7c537dc9dd9f_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classbot_1_1Bot_affc589ed1cdb57710dc551f8a460cb6d}\label{classbot_1_1Bot_affc589ed1cdb57710dc551f8a460cb6d}} 
\index{bot.Bot@{bot.Bot}!consume\_outgoing\_queue@{consume\_outgoing\_queue}}
\index{consume\_outgoing\_queue@{consume\_outgoing\_queue}!bot.Bot@{bot.Bot}}
\doxysubsubsection{\texorpdfstring{consume\_outgoing\_queue()}{consume\_outgoing\_queue()}}
{\footnotesize\ttfamily def bot.\+Bot.\+consume\+\_\+outgoing\+\_\+queue (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 265 of file bot.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{265     \textcolor{keyword}{def }consume\_outgoing\_queue(self):}
\DoxyCodeLine{266         \textcolor{keywordflow}{while} \textcolor{keywordflow}{not} self.bot\_stop\_event.is\_set():}
\DoxyCodeLine{267             \textcolor{keywordflow}{try}:}
\DoxyCodeLine{268                 queued\_msg: OutgoingQueuedMessage = self.outgoing\_messages.get(block=\textcolor{keyword}{True})}
\DoxyCodeLine{269                 \textcolor{keywordflow}{if} self.bot\_stop\_event.is\_set():}
\DoxyCodeLine{270                     \textcolor{keywordflow}{break}}
\DoxyCodeLine{271                 }
\DoxyCodeLine{272                 \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} queued\_msg.sent\_ok:}
\DoxyCodeLine{273                     \textcolor{keywordflow}{try}:}
\DoxyCodeLine{274                         payload = queued\_msg.message.http\_message.payload}
\DoxyCodeLine{275                         params = queued\_msg.message.http\_message.params}
\DoxyCodeLine{276                         headers = queued\_msg.message.http\_message.headers}
\DoxyCodeLine{277                         self.bot\_logger.info(f\textcolor{stringliteral}{"Sending HTTP: \{payload\}"})}
\DoxyCodeLine{278                         response = requests.post(self.send\_message\_api, json=payload, params=params, headers=headers)}
\DoxyCodeLine{279                         queued\_msg.sent\_ok = response.status\_code == 200}
\DoxyCodeLine{280                     \textcolor{keywordflow}{except} Exception \textcolor{keyword}{as} e:}
\DoxyCodeLine{281                         queued\_msg.send\_retries -\/= 1}
\DoxyCodeLine{282                         self.bot\_logger.error(f\textcolor{stringliteral}{"HTTP send failed, retries left=\{queued\_msg.send\_retries\}: \{e\}"})}
\DoxyCodeLine{283                         \textcolor{keywordflow}{if} queued\_msg.send\_retries > 0:}
\DoxyCodeLine{284                             self.outgoing\_messages.put(queued\_msg, block=\textcolor{keyword}{True})}
\DoxyCodeLine{285                         \textcolor{keywordflow}{else}:}
\DoxyCodeLine{286                             queued\_msg.set\_result(\textcolor{keyword}{False})}
\DoxyCodeLine{287                         \textcolor{keywordflow}{continue}}
\DoxyCodeLine{288 }
\DoxyCodeLine{289                 \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} queued\_msg.stored\_ok \textcolor{keywordflow}{and} self.on\_outgoing\_message:}
\DoxyCodeLine{290                     \textcolor{keywordflow}{try}:}
\DoxyCodeLine{291                         stored\_ok = self.on\_outgoing\_message(queued\_msg.message)}
\DoxyCodeLine{292                         queued\_msg.stored\_ok = stored\_ok}
\DoxyCodeLine{293                         queued\_msg.set\_result(stored\_ok)}
\DoxyCodeLine{294                     \textcolor{keywordflow}{except} Exception \textcolor{keyword}{as} e:}
\DoxyCodeLine{295                         self.bot\_logger.error(f\textcolor{stringliteral}{"Outgoing callback error: \{e\}"})}
\DoxyCodeLine{296                         queued\_msg.store\_retries -\/= 1}
\DoxyCodeLine{297                         \textcolor{keywordflow}{if} queued\_msg.store\_retries > 0:}
\DoxyCodeLine{298                             self.outgoing\_messages.put(queued\_msg, block=\textcolor{keyword}{True})}
\DoxyCodeLine{299                         \textcolor{keywordflow}{else}:}
\DoxyCodeLine{300                             queued\_msg.set\_result(\textcolor{keyword}{False})}
\DoxyCodeLine{301             \textcolor{keywordflow}{except} Exception \textcolor{keyword}{as} e:}
\DoxyCodeLine{302                 self.bot\_logger.error(f\textcolor{stringliteral}{"Unexpected error in outgoing processing: \{e\}"})}
\DoxyCodeLine{303                 \textcolor{keywordflow}{raise} BotMessageException(f\textcolor{stringliteral}{"Outgoing queue processing failed: \{e\}"}) \textcolor{keyword}{from} e}
\DoxyCodeLine{304 }

\end{DoxyCode}


References bot.\+Bot.\+bot\+\_\+logger, bot.\+Bot.\+bot\+\_\+stop\+\_\+event, bot.\+Bot.\+on\+\_\+outgoing\+\_\+message, and bot.\+Bot.\+outgoing\+\_\+messages.



Referenced by bot.\+Bot.\+start().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=340pt]{classbot_1_1Bot_affc589ed1cdb57710dc551f8a460cb6d_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classbot_1_1Bot_a5b75973a7eae79a74d717eacb2b778b2}\label{classbot_1_1Bot_a5b75973a7eae79a74d717eacb2b778b2}} 
\index{bot.Bot@{bot.Bot}!deserialize@{deserialize}}
\index{deserialize@{deserialize}!bot.Bot@{bot.Bot}}
\doxysubsubsection{\texorpdfstring{deserialize()}{deserialize()}}
{\footnotesize\ttfamily def bot.\+Bot.\+deserialize (\begin{DoxyParamCaption}\item[{}]{cls,  }\item[{}]{data }\end{DoxyParamCaption})}



Definition at line 379 of file bot.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{379     \textcolor{keyword}{def }deserialize(cls, data):}
\DoxyCodeLine{380         \textcolor{keywordflow}{if} isinstance(data, (str, int, float, bool)) \textcolor{keywordflow}{or} data \textcolor{keywordflow}{is} \textcolor{keywordtype}{None}:}
\DoxyCodeLine{381             \textcolor{keywordflow}{return} data}
\DoxyCodeLine{382 }
\DoxyCodeLine{383         \textcolor{keywordflow}{if} isinstance(data, dict):}
\DoxyCodeLine{384             t = data.get(\textcolor{stringliteral}{"\_type"})}
\DoxyCodeLine{385 }
\DoxyCodeLine{386             \textcolor{keywordflow}{if} t == \textcolor{stringliteral}{"Queue"}:}
\DoxyCodeLine{387                 q = queue.Queue(maxsize=1000)}
\DoxyCodeLine{388                 \textcolor{keywordflow}{for} item \textcolor{keywordflow}{in} data[\textcolor{stringliteral}{"items"}]:}
\DoxyCodeLine{389                     \textcolor{keywordflow}{if} item == \textcolor{stringliteral}{"..."}:}
\DoxyCodeLine{390                         \textcolor{keywordflow}{continue}}
\DoxyCodeLine{391                     q.put(cls.deserialize(item))}
\DoxyCodeLine{392                 \textcolor{keywordflow}{return} q}
\DoxyCodeLine{393 }
\DoxyCodeLine{394             \textcolor{keywordflow}{if} t == \textcolor{stringliteral}{"HTTPMessage"}:}
\DoxyCodeLine{395                 \textcolor{keywordflow}{return} HTTPMessage(}
\DoxyCodeLine{396                     payload=data.get(\textcolor{stringliteral}{"payload"}),}
\DoxyCodeLine{397                     params=data.get(\textcolor{stringliteral}{"params"}),}
\DoxyCodeLine{398                     headers=data.get(\textcolor{stringliteral}{"headers"})}
\DoxyCodeLine{399                 )}
\DoxyCodeLine{400 }
\DoxyCodeLine{401             \textcolor{keywordflow}{if} t == \textcolor{stringliteral}{"Message"}:}
\DoxyCodeLine{402                 \textcolor{keywordflow}{return} Message(}
\DoxyCodeLine{403                     message=data.get(\textcolor{stringliteral}{"message"}),}
\DoxyCodeLine{404                     http\_message=cls.deserialize(data.get(\textcolor{stringliteral}{"http\_message"})),}
\DoxyCodeLine{405                     destId=data.get(\textcolor{stringliteral}{"destId"}),}
\DoxyCodeLine{406                     sourceId=data.get(\textcolor{stringliteral}{"sourceId"}),}
\DoxyCodeLine{407                     datetime=datetime.fromisoformat(data.get(\textcolor{stringliteral}{"datetime"}))}
\DoxyCodeLine{408                 )}
\DoxyCodeLine{409 }
\DoxyCodeLine{410             \textcolor{keywordflow}{if} t == \textcolor{stringliteral}{"QueuedMessage"}:}
\DoxyCodeLine{411                 qm = QueuedMessage(cls.deserialize(data.get(\textcolor{stringliteral}{"message"})))}
\DoxyCodeLine{412                 qm.result = data.get(\textcolor{stringliteral}{"result"})}
\DoxyCodeLine{413                 \textcolor{keywordflow}{return} qm}
\DoxyCodeLine{414 }
\DoxyCodeLine{415             \textcolor{keywordflow}{if} t == \textcolor{stringliteral}{"Bot"}:}
\DoxyCodeLine{416                 bot = Bot(id=data.get(\textcolor{stringliteral}{"id"}))}
\DoxyCodeLine{417                 bot.send\_message\_api = data.get(\textcolor{stringliteral}{"send\_message\_api"})}
\DoxyCodeLine{418                 bot.token = data.get(\textcolor{stringliteral}{"token"})}
\DoxyCodeLine{419 }
\DoxyCodeLine{420                 bot.outgoing\_messages = cls.deserialize(data.get(\textcolor{stringliteral}{"outgoing\_messages"}))}
\DoxyCodeLine{421                 bot.incoming\_messages = cls.deserialize(data.get(\textcolor{stringliteral}{"incoming\_messages"}))}
\DoxyCodeLine{422                 \textcolor{keywordflow}{return} bot}
\DoxyCodeLine{423             }
\DoxyCodeLine{424             \textcolor{keywordflow}{return} \{k: cls.deserialize(v) \textcolor{keywordflow}{for} k, v \textcolor{keywordflow}{in} data.items() \textcolor{keywordflow}{if} k != \textcolor{stringliteral}{"\_type"}\}}
\DoxyCodeLine{425 }
\DoxyCodeLine{426         \textcolor{keywordflow}{if} isinstance(data, list):}
\DoxyCodeLine{427             \textcolor{keywordflow}{return} [cls.deserialize(x) \textcolor{keywordflow}{for} x \textcolor{keywordflow}{in} data]}
\DoxyCodeLine{428 }
\DoxyCodeLine{429         \textcolor{keywordflow}{raise} ValueError(f\textcolor{stringliteral}{"Unable to deserialize: \{data\}"})}
\DoxyCodeLine{430 }

\end{DoxyCode}


References bot.\+Bot.\+deserialize().



Referenced by bot.\+Bot.\+deserialize().

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=188pt]{classbot_1_1Bot_a5b75973a7eae79a74d717eacb2b778b2_cgraph}
\end{center}
\end{figure}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=188pt]{classbot_1_1Bot_a5b75973a7eae79a74d717eacb2b778b2_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classbot_1_1Bot_abcb1dacfc1a62e2605216467ab1ccbea}\label{classbot_1_1Bot_abcb1dacfc1a62e2605216467ab1ccbea}} 
\index{bot.Bot@{bot.Bot}!http\_check@{http\_check}}
\index{http\_check@{http\_check}!bot.Bot@{bot.Bot}}
\doxysubsubsection{\texorpdfstring{http\_check()}{http\_check()}}
{\footnotesize\ttfamily  bool bot.\+Bot.\+http\+\_\+check (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 240 of file bot.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{240     \textcolor{keyword}{def }http\_check(self) -\/> bool:}
\DoxyCodeLine{241         \textcolor{keywordflow}{if} self.bot\_stop\_event.is\_set():}
\DoxyCodeLine{242             \textcolor{keywordflow}{return} \textcolor{keyword}{False}}
\DoxyCodeLine{243         \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} (self.consumer\_out\_thread \textcolor{keywordflow}{and} self.consumer\_out\_thread.is\_alive() \textcolor{keywordflow}{and}}
\DoxyCodeLine{244                 self.consumer\_in\_thread \textcolor{keywordflow}{and} self.consumer\_in\_thread.is\_alive()):}
\DoxyCodeLine{245             \textcolor{keywordflow}{return} \textcolor{keyword}{False}}
\DoxyCodeLine{246 }
\DoxyCodeLine{247         \textcolor{keywordflow}{try}:}
\DoxyCodeLine{248             response = requests.get(self.send\_message\_api, timeout=5)}
\DoxyCodeLine{249             \textcolor{keywordflow}{return} response.status\_code == 200}
\DoxyCodeLine{250         \textcolor{keywordflow}{except} requests.RequestException \textcolor{keyword}{as} e:}
\DoxyCodeLine{251             self.bot\_logger.error(f\textcolor{stringliteral}{"HTTP health check failed: \{e\}"})}
\DoxyCodeLine{252             \textcolor{keywordflow}{raise} BotHealthCheckException(f\textcolor{stringliteral}{"Bot HTTP health check error: \{e\}"}) \textcolor{keyword}{from} e}
\DoxyCodeLine{253 }

\end{DoxyCode}


References bot.\+Bot.\+bot\+\_\+logger, bot.\+Bot.\+bot\+\_\+stop\+\_\+event, bot.\+Bot.\+consumer\+\_\+in\+\_\+thread, and bot.\+Bot.\+consumer\+\_\+out\+\_\+thread.



Referenced by bot.\+Bot.\+alive().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=303pt]{classbot_1_1Bot_abcb1dacfc1a62e2605216467ab1ccbea_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classbot_1_1Bot_ad5d7132f04e1da19e3353fdaea60671b}\label{classbot_1_1Bot_ad5d7132f04e1da19e3353fdaea60671b}} 
\index{bot.Bot@{bot.Bot}!is\_running@{is\_running}}
\index{is\_running@{is\_running}!bot.Bot@{bot.Bot}}
\doxysubsubsection{\texorpdfstring{is\_running()}{is\_running()}}
{\footnotesize\ttfamily  bool bot.\+Bot.\+is\+\_\+running (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 254 of file bot.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{254     \textcolor{keyword}{def }is\_running(self) -\/> bool:}
\DoxyCodeLine{255         \textcolor{keywordflow}{return} (\textcolor{keywordflow}{not} self.bot\_stop\_event.is\_set() \textcolor{keywordflow}{and}}
\DoxyCodeLine{256                 self.consumer\_out\_thread \textcolor{keywordflow}{and} self.consumer\_out\_thread.is\_alive() \textcolor{keywordflow}{and}}
\DoxyCodeLine{257                 self.consumer\_in\_thread \textcolor{keywordflow}{and} self.consumer\_in\_thread.is\_alive())}
\DoxyCodeLine{258 }

\end{DoxyCode}


References bot.\+Bot.\+bot\+\_\+stop\+\_\+event, bot.\+Bot.\+consumer\+\_\+in\+\_\+thread, and bot.\+Bot.\+consumer\+\_\+out\+\_\+thread.



Referenced by bot.\+Bot.\+alive().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=300pt]{classbot_1_1Bot_ad5d7132f04e1da19e3353fdaea60671b_icgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classbot_1_1Bot_a1a5afd8d908416b5c1301df7691f9948}\label{classbot_1_1Bot_a1a5afd8d908416b5c1301df7691f9948}} 
\index{bot.Bot@{bot.Bot}!receive\_message@{receive\_message}}
\index{receive\_message@{receive\_message}!bot.Bot@{bot.Bot}}
\doxysubsubsection{\texorpdfstring{receive\_message()}{receive\_message()}}
{\footnotesize\ttfamily def bot.\+Bot.\+receive\+\_\+message (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{\mbox{\hyperlink{classbot_1_1Bot_a713a9070511a3545c1b9f37118bc2088}{str}}}]{payload,  }\item[{bool }]{wait = {\ttfamily False} }\end{DoxyParamCaption})}



Definition at line 357 of file bot.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{357     \textcolor{keyword}{def }receive\_message(self, payload: str, wait: bool = \textcolor{keyword}{False}):}
\DoxyCodeLine{358         msg = Message(http\_message=HTTPMessage(payload), destId=\textcolor{stringliteral}{"Chatbot"}, sourceId=self.id, datetime=datetime.now())}
\DoxyCodeLine{359         queued\_msg = IncomingQueuedMessage(msg)}
\DoxyCodeLine{360 }
\DoxyCodeLine{361         \textcolor{keywordflow}{try}:}
\DoxyCodeLine{362             self.incoming\_messages.put(queued\_msg, block=\textcolor{keyword}{False})}
\DoxyCodeLine{363         \textcolor{keywordflow}{except} queue.Full \textcolor{keyword}{as} qfe:}
\DoxyCodeLine{364             \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} wait:}
\DoxyCodeLine{365                 self.bot\_logger.warning(\textcolor{stringliteral}{"Incoming queue full, message skipped"})}
\DoxyCodeLine{366                 \textcolor{keywordflow}{raise} BotMessageQueueFullException(\textcolor{stringliteral}{"Incoming queue full"}) \textcolor{keyword}{from} qfe}
\DoxyCodeLine{367             \textcolor{keywordflow}{else}:}
\DoxyCodeLine{368                 \textcolor{keywordflow}{try}:}
\DoxyCodeLine{369                     self.incoming\_messages.put(queued\_msg, block=\textcolor{keyword}{True})}
\DoxyCodeLine{370                 \textcolor{keywordflow}{except} Exception \textcolor{keyword}{as} e:}
\DoxyCodeLine{371                     self.bot\_logger.error(f\textcolor{stringliteral}{"Failed to enqueue incoming message: \{e\}"})}
\DoxyCodeLine{372                     \textcolor{keywordflow}{raise} BotQueueException(f\textcolor{stringliteral}{"Failed to enqueue incoming message: \{e\}"}) \textcolor{keyword}{from} e}
\DoxyCodeLine{373     }

\end{DoxyCode}


References bot.\+Bot.\+bot\+\_\+logger, bot.\+Bot.\+id, and bot.\+Bot.\+incoming\+\_\+messages.

\mbox{\Hypertarget{classbot_1_1Bot_adbd5dedcd2aca4ef616e4ee322324831}\label{classbot_1_1Bot_adbd5dedcd2aca4ef616e4ee322324831}} 
\index{bot.Bot@{bot.Bot}!send\_message@{send\_message}}
\index{send\_message@{send\_message}!bot.Bot@{bot.Bot}}
\doxysubsubsection{\texorpdfstring{send\_message()}{send\_message()}}
{\footnotesize\ttfamily  Optional\mbox{[}bool\mbox{]} bot.\+Bot.\+send\+\_\+message (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{\mbox{\hyperlink{classbot_1_1Bot_a713a9070511a3545c1b9f37118bc2088}{str}}}]{payload,  }\item[{bool }]{wait = {\ttfamily False} }\end{DoxyParamCaption})}



Definition at line 334 of file bot.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{334     \textcolor{keyword}{def }send\_message(self, payload: str, wait: bool = \textcolor{keyword}{False}) -\/> Optional[bool]:}
\DoxyCodeLine{335         msg = Message(http\_message=HTTPMessage(payload), destId=self.id, sourceId=\textcolor{stringliteral}{"Chatbot"}, datetime=datetime.now())}
\DoxyCodeLine{336         queued\_msg = OutgoingQueuedMessage(msg)}
\DoxyCodeLine{337 }
\DoxyCodeLine{338         \textcolor{keywordflow}{try}:}
\DoxyCodeLine{339             self.outgoing\_messages.put(queued\_msg, block=\textcolor{keyword}{False})}
\DoxyCodeLine{340         \textcolor{keywordflow}{except} queue.Full \textcolor{keyword}{as} qfe:}
\DoxyCodeLine{341             \textcolor{keywordflow}{if} \textcolor{keywordflow}{not} wait:}
\DoxyCodeLine{342                 self.bot\_logger.warning(\textcolor{stringliteral}{"Outgoing queue full, message skipped"})}
\DoxyCodeLine{343                 \textcolor{keywordflow}{raise} BotMessageQueueFullException(\textcolor{stringliteral}{"Outgoing queue full"}) \textcolor{keyword}{from} qfe}
\DoxyCodeLine{344             \textcolor{keywordflow}{else}:}
\DoxyCodeLine{345                 \textcolor{keywordflow}{try}:}
\DoxyCodeLine{346                     self.outgoing\_messages.put(queued\_msg, block=\textcolor{keyword}{True})}
\DoxyCodeLine{347                 \textcolor{keywordflow}{except} Exception \textcolor{keyword}{as} e:}
\DoxyCodeLine{348                     self.bot\_logger.error(f\textcolor{stringliteral}{"Failed to enqueue message: \{e2\}"})}
\DoxyCodeLine{349                     \textcolor{keywordflow}{raise} BotMessageQueueException(f\textcolor{stringliteral}{"Failed to enqueue outgoing message: \{e2\}"}) \textcolor{keyword}{from} e}
\DoxyCodeLine{350 }
\DoxyCodeLine{351         \textcolor{keywordflow}{try}:}
\DoxyCodeLine{352             \textcolor{keywordflow}{return} queued\_msg.wait\_result(timeout=10.0) \textcolor{keywordflow}{if} wait \textcolor{keywordflow}{else} \textcolor{keywordtype}{None}}
\DoxyCodeLine{353         \textcolor{keywordflow}{except} Exception \textcolor{keyword}{as} e:}
\DoxyCodeLine{354             self.bot\_logger.error(f\textcolor{stringliteral}{"Failed waiting for message result: \{e\}"})}
\DoxyCodeLine{355             \textcolor{keywordflow}{raise} BotQueuedMessageResultException(f\textcolor{stringliteral}{"Waiting result failed: \{e\}"}) \textcolor{keyword}{from} e}
\DoxyCodeLine{356 }

\end{DoxyCode}


References bot.\+Bot.\+bot\+\_\+logger, bot.\+Bot.\+id, and bot.\+Bot.\+outgoing\+\_\+messages.

\mbox{\Hypertarget{classbot_1_1Bot_a7d35e11e0846a89874d419f85f72ac82}\label{classbot_1_1Bot_a7d35e11e0846a89874d419f85f72ac82}} 
\index{bot.Bot@{bot.Bot}!serialize@{serialize}}
\index{serialize@{serialize}!bot.Bot@{bot.Bot}}
\doxysubsubsection{\texorpdfstring{serialize()}{serialize()}}
{\footnotesize\ttfamily def bot.\+Bot.\+serialize (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{}]{max\+\_\+queue\+\_\+items = {\ttfamily None} }\end{DoxyParamCaption})}



Definition at line 431 of file bot.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{431     \textcolor{keyword}{def }serialize(self, max\_queue\_items=None):}
\DoxyCodeLine{432         \textcolor{keyword}{def }serialize\_obj(value):}
\DoxyCodeLine{433             \textcolor{keywordflow}{if} isinstance(value, (str, int, float, bool)) \textcolor{keywordflow}{or} value \textcolor{keywordflow}{is} \textcolor{keywordtype}{None}:}
\DoxyCodeLine{434                 \textcolor{keywordflow}{return} value}
\DoxyCodeLine{435 }
\DoxyCodeLine{436             \textcolor{keywordflow}{if} isinstance(value, queue.Queue):}
\DoxyCodeLine{437                 items = list(value.queue)}
\DoxyCodeLine{438                 \textcolor{keywordflow}{if} max\_queue\_items \textcolor{keywordflow}{is} \textcolor{keywordflow}{not} \textcolor{keywordtype}{None} \textcolor{keywordflow}{and} len(items) > max\_queue\_items:}
\DoxyCodeLine{439                     items = items[:max\_queue\_items] + [\textcolor{stringliteral}{"..."}]}
\DoxyCodeLine{440                 \textcolor{keywordflow}{return} \{}
\DoxyCodeLine{441                     \textcolor{stringliteral}{"\_type"}: \textcolor{stringliteral}{"Queue"},}
\DoxyCodeLine{442                     \textcolor{stringliteral}{"size"}: len(list(value.queue)),}
\DoxyCodeLine{443                     \textcolor{stringliteral}{"items"}: [serialize\_obj(it) \textcolor{keywordflow}{for} it \textcolor{keywordflow}{in} items]}
\DoxyCodeLine{444                 \}}
\DoxyCodeLine{445 }
\DoxyCodeLine{446             \textcolor{keywordflow}{if} isinstance(value, HTTPMessage):}
\DoxyCodeLine{447                 \textcolor{keywordflow}{return} \{}
\DoxyCodeLine{448                     \textcolor{stringliteral}{"\_type"}: \textcolor{stringliteral}{"HTTPMessage"},}
\DoxyCodeLine{449                     \textcolor{stringliteral}{"payload"}: value.payload,}
\DoxyCodeLine{450                     \textcolor{stringliteral}{"params"}: value.params,}
\DoxyCodeLine{451                     \textcolor{stringliteral}{"headers"}: value.headers}
\DoxyCodeLine{452                 \}}
\DoxyCodeLine{453 }
\DoxyCodeLine{454             \textcolor{keywordflow}{if} isinstance(value, Message):}
\DoxyCodeLine{455                 \textcolor{keywordflow}{return} \{}
\DoxyCodeLine{456                     \textcolor{stringliteral}{"\_type"}: \textcolor{stringliteral}{"Message"},}
\DoxyCodeLine{457                     \textcolor{stringliteral}{"message"}: getattr(value, \textcolor{stringliteral}{"message"}, \textcolor{keywordtype}{None}),}
\DoxyCodeLine{458                     \textcolor{stringliteral}{"destId"}: value.destId,}
\DoxyCodeLine{459                     \textcolor{stringliteral}{"sourceId"}: value.sourceId,}
\DoxyCodeLine{460                     \textcolor{stringliteral}{"datetime"}: str(value.datetime),}
\DoxyCodeLine{461                     \textcolor{stringliteral}{"http\_message"}: serialize\_obj(value.http\_message)}
\DoxyCodeLine{462                 \}}
\DoxyCodeLine{463 }
\DoxyCodeLine{464             \textcolor{keywordflow}{if} isinstance(value, QueuedMessage):}
\DoxyCodeLine{465                 \textcolor{keywordflow}{return} \{}
\DoxyCodeLine{466                     \textcolor{stringliteral}{"\_type"}: \textcolor{stringliteral}{"QueuedMessage"},}
\DoxyCodeLine{467                     \textcolor{stringliteral}{"result"}: value.result,}
\DoxyCodeLine{468                     \textcolor{stringliteral}{"message"}: serialize\_obj(value.message)}
\DoxyCodeLine{469                 \}}
\DoxyCodeLine{470 }
\DoxyCodeLine{471             \textcolor{keywordflow}{return} str(value)}
\DoxyCodeLine{472 }
\DoxyCodeLine{473         \textcolor{keywordflow}{return} \{}
\DoxyCodeLine{474             \textcolor{stringliteral}{"class"}: self.\_\_class\_\_.\_\_name\_\_,}
\DoxyCodeLine{475             \textcolor{stringliteral}{"attributes"}: \{attr: serialize\_obj(val) \textcolor{keywordflow}{for} attr, val \textcolor{keywordflow}{in} self.\_\_dict\_\_.items()\}}
\DoxyCodeLine{476         \}}
\DoxyCodeLine{477 }
\DoxyCodeLine{478 }
\DoxyCodeLine{479 }
\DoxyCodeLine{480 }
\DoxyCodeLine{481 }

\end{DoxyCode}


References bot.\+Bot.\+str.

\mbox{\Hypertarget{classbot_1_1Bot_aebb0cbe71236c1e928a7f8bc75edcc8a}\label{classbot_1_1Bot_aebb0cbe71236c1e928a7f8bc75edcc8a}} 
\index{bot.Bot@{bot.Bot}!start@{start}}
\index{start@{start}!bot.Bot@{bot.Bot}}
\doxysubsubsection{\texorpdfstring{start()}{start()}}
{\footnotesize\ttfamily def bot.\+Bot.\+start (\begin{DoxyParamCaption}\item[{}]{self,  }\item[{\mbox{\hyperlink{classbot_1_1Bot_a713a9070511a3545c1b9f37118bc2088}{str}} }]{consumer\+\_\+out\+\_\+thread\+\_\+name = {\ttfamily \char`\"{}BotConsumerOutgoingThread\char`\"{}},  }\item[{\mbox{\hyperlink{classbot_1_1Bot_a713a9070511a3545c1b9f37118bc2088}{str}} }]{consumer\+\_\+in\+\_\+thread\+\_\+name = {\ttfamily \char`\"{}BotConsumerIncomingThread\char`\"{}},  }\item[{bool }]{daemon = {\ttfamily True},  }\item[{$\ast$$\ast$}]{thread\+\_\+kwargs }\end{DoxyParamCaption})}



Definition at line 194 of file bot.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{194     \textcolor{keyword}{def }start(self, consumer\_out\_thread\_name: str = \textcolor{stringliteral}{"BotConsumerOutgoingThread"},}
\DoxyCodeLine{195               consumer\_in\_thread\_name: str = \textcolor{stringliteral}{"BotConsumerIncomingThread"},}
\DoxyCodeLine{196               daemon: bool = \textcolor{keyword}{True}, **thread\_kwargs):}
\DoxyCodeLine{197         \textcolor{keywordflow}{try}:}
\DoxyCodeLine{198             \textcolor{keywordflow}{if} self.consumer\_out\_thread \textcolor{keywordflow}{is} \textcolor{keywordtype}{None} \textcolor{keywordflow}{or} \textcolor{keywordflow}{not} self.consumer\_out\_thread.is\_alive():}
\DoxyCodeLine{199                 self.bot\_stop\_event.clear()}
\DoxyCodeLine{200                 self.consumer\_out\_thread = threading.Thread(}
\DoxyCodeLine{201                     target=self.consume\_outgoing\_queue,}
\DoxyCodeLine{202                     name=consumer\_out\_thread\_name,}
\DoxyCodeLine{203                     daemon=daemon,}
\DoxyCodeLine{204                     **thread\_kwargs}
\DoxyCodeLine{205                 )}
\DoxyCodeLine{206                 self.consumer\_out\_thread.start()}
\DoxyCodeLine{207                 self.bot\_logger.info(f\textcolor{stringliteral}{"Bot Outgoing Thread '\{consumer\_out\_thread\_name\}' started"})}
\DoxyCodeLine{208         \textcolor{keywordflow}{except} Exception \textcolor{keyword}{as} e:}
\DoxyCodeLine{209             self.bot\_logger.error(f\textcolor{stringliteral}{"Failed to start outgoing thread: \{e\}"})}
\DoxyCodeLine{210             \textcolor{keywordflow}{raise} BotStartThreadException(f\textcolor{stringliteral}{"Outgoing thread error: \{e\}"}) \textcolor{keyword}{from} e}
\DoxyCodeLine{211 }
\DoxyCodeLine{212         \textcolor{keywordflow}{try}:}
\DoxyCodeLine{213             \textcolor{keywordflow}{if} self.consumer\_in\_thread \textcolor{keywordflow}{is} \textcolor{keywordtype}{None} \textcolor{keywordflow}{or} \textcolor{keywordflow}{not} self.consumer\_in\_thread.is\_alive():}
\DoxyCodeLine{214                 self.bot\_stop\_event.clear()}
\DoxyCodeLine{215                 self.consumer\_in\_thread = threading.Thread(}
\DoxyCodeLine{216                     target=self.consume\_incoming\_queue,}
\DoxyCodeLine{217                     name=consumer\_in\_thread\_name,}
\DoxyCodeLine{218                     daemon=daemon,}
\DoxyCodeLine{219                     **thread\_kwargs}
\DoxyCodeLine{220                 )}
\DoxyCodeLine{221                 self.consumer\_in\_thread.start()}
\DoxyCodeLine{222                 self.bot\_logger.info(f\textcolor{stringliteral}{"Bot Incoming Thread '\{consumer\_in\_thread\_name\}' started"})}
\DoxyCodeLine{223         \textcolor{keywordflow}{except} Exception \textcolor{keyword}{as} e:}
\DoxyCodeLine{224             self.bot\_logger.error(f\textcolor{stringliteral}{"Failed to start incoming thread: \{e\}"})}
\DoxyCodeLine{225             \textcolor{keywordflow}{raise} BotStartThreadException(f\textcolor{stringliteral}{"Incoming thread error: \{e\}"}) \textcolor{keyword}{from} e}
\DoxyCodeLine{226 }

\end{DoxyCode}


References bot.\+Bot.\+bot\+\_\+logger, bot.\+Bot.\+bot\+\_\+stop\+\_\+event, bot.\+Bot.\+consume\+\_\+incoming\+\_\+queue(), bot.\+Bot.\+consume\+\_\+outgoing\+\_\+queue(), bot.\+Bot.\+consumer\+\_\+in\+\_\+thread, and bot.\+Bot.\+consumer\+\_\+out\+\_\+thread.

Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=342pt]{classbot_1_1Bot_aebb0cbe71236c1e928a7f8bc75edcc8a_cgraph}
\end{center}
\end{figure}
\mbox{\Hypertarget{classbot_1_1Bot_ad104bfb455f514dab0e9a1df889661f4}\label{classbot_1_1Bot_ad104bfb455f514dab0e9a1df889661f4}} 
\index{bot.Bot@{bot.Bot}!stop@{stop}}
\index{stop@{stop}!bot.Bot@{bot.Bot}}
\doxysubsubsection{\texorpdfstring{stop()}{stop()}}
{\footnotesize\ttfamily def bot.\+Bot.\+stop (\begin{DoxyParamCaption}\item[{}]{self }\end{DoxyParamCaption})}



Definition at line 227 of file bot.\+py.


\begin{DoxyCode}{0}
\DoxyCodeLine{227     \textcolor{keyword}{def }stop(self):}
\DoxyCodeLine{228         self.bot\_logger.info(f\textcolor{stringliteral}{"Stopping bot id=\{self.id\}"})}
\DoxyCodeLine{229         \textcolor{keywordflow}{try}:}
\DoxyCodeLine{230             self.bot\_stop\_event.set()}
\DoxyCodeLine{231             \textcolor{keywordflow}{if} self.consumer\_out\_thread \textcolor{keywordflow}{and} self.consumer\_out\_thread.is\_alive():}
\DoxyCodeLine{232                 self.consumer\_out\_thread.join(timeout=5)}
\DoxyCodeLine{233             \textcolor{keywordflow}{if} self.consumer\_in\_thread \textcolor{keywordflow}{and} self.consumer\_in\_thread.is\_alive():}
\DoxyCodeLine{234                 self.consumer\_in\_thread.join(timeout=5)}
\DoxyCodeLine{235             self.bot\_logger.info(f\textcolor{stringliteral}{"Bot id=\{self.id\} stopped"})}
\DoxyCodeLine{236         \textcolor{keywordflow}{except} Exception \textcolor{keyword}{as} e:}
\DoxyCodeLine{237             self.bot\_logger.warning(f\textcolor{stringliteral}{"Error stopping bot id=\{self.id\}: \{e\}"})}
\DoxyCodeLine{238             \textcolor{keywordflow}{raise} BotStopException(f\textcolor{stringliteral}{"Stop failed for bot \{self.id\}: \{e\}"}) \textcolor{keyword}{from} e}
\DoxyCodeLine{239 }

\end{DoxyCode}


References bot.\+Bot.\+bot\+\_\+logger, bot.\+Bot.\+bot\+\_\+stop\+\_\+event, bot.\+Bot.\+consumer\+\_\+in\+\_\+thread, and bot.\+Bot.\+consumer\+\_\+out\+\_\+thread.



Referenced by bot.\+Bot.\+\_\+\+\_\+del\+\_\+\+\_\+(), and bot.\+Bot\+Manager.\+\_\+\+\_\+del\+\_\+\+\_\+().

Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=326pt]{classbot_1_1Bot_ad104bfb455f514dab0e9a1df889661f4_icgraph}
\end{center}
\end{figure}


\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{classbot_1_1Bot_a4200619881ffd921c83fea1c88ade779}\label{classbot_1_1Bot_a4200619881ffd921c83fea1c88ade779}} 
\index{bot.Bot@{bot.Bot}!bot\_logger@{bot\_logger}}
\index{bot\_logger@{bot\_logger}!bot.Bot@{bot.Bot}}
\doxysubsubsection{\texorpdfstring{bot\_logger}{bot\_logger}}
{\footnotesize\ttfamily bot.\+Bot.\+bot\+\_\+logger}



Definition at line 183 of file bot.\+py.



Referenced by bot.\+Bot.\+consume\+\_\+incoming\+\_\+queue(), bot.\+Bot.\+consume\+\_\+outgoing\+\_\+queue(), bot.\+Bot.\+http\+\_\+check(), bot.\+Bot.\+receive\+\_\+message(), bot.\+Bot.\+send\+\_\+message(), bot.\+Bot.\+start(), and bot.\+Bot.\+stop().

\mbox{\Hypertarget{classbot_1_1Bot_a49a3cb244864db94f45e1839a6633b48}\label{classbot_1_1Bot_a49a3cb244864db94f45e1839a6633b48}} 
\index{bot.Bot@{bot.Bot}!bot\_stop\_event@{bot\_stop\_event}}
\index{bot\_stop\_event@{bot\_stop\_event}!bot.Bot@{bot.Bot}}
\doxysubsubsection{\texorpdfstring{bot\_stop\_event}{bot\_stop\_event}}
{\footnotesize\ttfamily bot.\+Bot.\+bot\+\_\+stop\+\_\+event}



Definition at line 179 of file bot.\+py.



Referenced by bot.\+Bot.\+\_\+\+\_\+del\+\_\+\+\_\+(), bot.\+Bot.\+consume\+\_\+incoming\+\_\+queue(), bot.\+Bot.\+consume\+\_\+outgoing\+\_\+queue(), bot.\+Bot.\+http\+\_\+check(), bot.\+Bot.\+is\+\_\+running(), bot.\+Bot.\+start(), and bot.\+Bot.\+stop().

\mbox{\Hypertarget{classbot_1_1Bot_a87e70e3fb06627351b11db45260eb012}\label{classbot_1_1Bot_a87e70e3fb06627351b11db45260eb012}} 
\index{bot.Bot@{bot.Bot}!consumer\_in\_thread@{consumer\_in\_thread}}
\index{consumer\_in\_thread@{consumer\_in\_thread}!bot.Bot@{bot.Bot}}
\doxysubsubsection{\texorpdfstring{consumer\_in\_thread}{consumer\_in\_thread}}
{\footnotesize\ttfamily bot.\+Bot.\+consumer\+\_\+in\+\_\+thread}



Definition at line 188 of file bot.\+py.



Referenced by bot.\+Bot.\+http\+\_\+check(), bot.\+Bot.\+is\+\_\+running(), bot.\+Bot.\+start(), and bot.\+Bot.\+stop().

\mbox{\Hypertarget{classbot_1_1Bot_a840f4ce430e2db8135638d5604988685}\label{classbot_1_1Bot_a840f4ce430e2db8135638d5604988685}} 
\index{bot.Bot@{bot.Bot}!consumer\_out\_thread@{consumer\_out\_thread}}
\index{consumer\_out\_thread@{consumer\_out\_thread}!bot.Bot@{bot.Bot}}
\doxysubsubsection{\texorpdfstring{consumer\_out\_thread}{consumer\_out\_thread}}
{\footnotesize\ttfamily bot.\+Bot.\+consumer\+\_\+out\+\_\+thread}



Definition at line 187 of file bot.\+py.



Referenced by bot.\+Bot.\+http\+\_\+check(), bot.\+Bot.\+is\+\_\+running(), bot.\+Bot.\+start(), and bot.\+Bot.\+stop().

\mbox{\Hypertarget{classbot_1_1Bot_aaf6cd6c903b32263619da0130916b16f}\label{classbot_1_1Bot_aaf6cd6c903b32263619da0130916b16f}} 
\index{bot.Bot@{bot.Bot}!id@{id}}
\index{id@{id}!bot.Bot@{bot.Bot}}
\doxysubsubsection{\texorpdfstring{id}{id}}
{\footnotesize\ttfamily bot.\+Bot.\+id}



Definition at line 176 of file bot.\+py.



Referenced by bot.\+Bot.\+receive\+\_\+message(), bot.\+Bot.\+send\+\_\+message(), bot.\+Telegram\+Bot.\+send\+\_\+message(), bot.\+Facebook\+Bot.\+send\+\_\+message(), and bot.\+Whatsapp\+Bot.\+send\+\_\+message().

\mbox{\Hypertarget{classbot_1_1Bot_a547f67086019ed117d6b166d0df7c8b9}\label{classbot_1_1Bot_a547f67086019ed117d6b166d0df7c8b9}} 
\index{bot.Bot@{bot.Bot}!incoming\_messages@{incoming\_messages}}
\index{incoming\_messages@{incoming\_messages}!bot.Bot@{bot.Bot}}
\doxysubsubsection{\texorpdfstring{incoming\_messages}{incoming\_messages}}
{\footnotesize\ttfamily bot.\+Bot.\+incoming\+\_\+messages}



Definition at line 178 of file bot.\+py.



Referenced by bot.\+Bot.\+consume\+\_\+incoming\+\_\+queue(), and bot.\+Bot.\+receive\+\_\+message().

\mbox{\Hypertarget{classbot_1_1Bot_aed622df2ae13229f657faecdf83a3909}\label{classbot_1_1Bot_aed622df2ae13229f657faecdf83a3909}} 
\index{bot.Bot@{bot.Bot}!on\_incoming\_message@{on\_incoming\_message}}
\index{on\_incoming\_message@{on\_incoming\_message}!bot.Bot@{bot.Bot}}
\doxysubsubsection{\texorpdfstring{on\_incoming\_message}{on\_incoming\_message}}
{\footnotesize\ttfamily bot.\+Bot.\+on\+\_\+incoming\+\_\+message}



Definition at line 180 of file bot.\+py.



Referenced by bot.\+Bot.\+consume\+\_\+incoming\+\_\+queue().

\mbox{\Hypertarget{classbot_1_1Bot_a69db2b0d03aa84dc1e3170d0a92b82fb}\label{classbot_1_1Bot_a69db2b0d03aa84dc1e3170d0a92b82fb}} 
\index{bot.Bot@{bot.Bot}!on\_outgoing\_message@{on\_outgoing\_message}}
\index{on\_outgoing\_message@{on\_outgoing\_message}!bot.Bot@{bot.Bot}}
\doxysubsubsection{\texorpdfstring{on\_outgoing\_message}{on\_outgoing\_message}}
{\footnotesize\ttfamily bot.\+Bot.\+on\+\_\+outgoing\+\_\+message}



Definition at line 181 of file bot.\+py.



Referenced by bot.\+Bot.\+consume\+\_\+outgoing\+\_\+queue().

\mbox{\Hypertarget{classbot_1_1Bot_aa39fcf960e34cbf36063915ba17dc982}\label{classbot_1_1Bot_aa39fcf960e34cbf36063915ba17dc982}} 
\index{bot.Bot@{bot.Bot}!outgoing\_messages@{outgoing\_messages}}
\index{outgoing\_messages@{outgoing\_messages}!bot.Bot@{bot.Bot}}
\doxysubsubsection{\texorpdfstring{outgoing\_messages}{outgoing\_messages}}
{\footnotesize\ttfamily bot.\+Bot.\+outgoing\+\_\+messages}



Definition at line 177 of file bot.\+py.



Referenced by bot.\+Bot.\+consume\+\_\+outgoing\+\_\+queue(), and bot.\+Bot.\+send\+\_\+message().

\mbox{\Hypertarget{classbot_1_1Bot_a713a9070511a3545c1b9f37118bc2088}\label{classbot_1_1Bot_a713a9070511a3545c1b9f37118bc2088}} 
\index{bot.Bot@{bot.Bot}!str@{str}}
\index{str@{str}!bot.Bot@{bot.Bot}}
\doxysubsubsection{\texorpdfstring{str}{str}}
{\footnotesize\ttfamily bot.\+Bot.\+str\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 172 of file bot.\+py.



Referenced by bot.\+Bot.\+serialize().



The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
src/\mbox{\hyperlink{bot_8py}{bot.\+py}}\end{DoxyCompactItemize}
